# 测试
go test 子命令是 Go 语言包的测试驱动程序。在一个包目录中，以 _test.go 结尾的文件不是 go build 命令编译的目标，
而是 go test 编译的目标。

在 *_test.go 文件中，三种函数需要特殊对待，即功能测试函数、基准测试函数和示例测试函数。
**功能测试函数**是以 Test 前缀命名的函数，用来检测一些程序逻辑的正确性，go test 运行测试函数，并且报告结果
是 PASS 还是 FAIL。**基准测试函数**的名称以 Benchmark 开头，用来测试某些操作的性能，go test 汇报操作的平均执行时间。**示例函数**的名称，以 Example 开头，用来提供机器检查过的文档。

go test 工具扫描 *_test.go 文件来寻找特殊函数，并生成一个临时的 main 包来调用它们，然后编译和运行，并汇报结果，最后清空临时文件。

- 选项 -v 可以输出包中每个测试用例的名称和执行的时间
- 选项 -run 的参数是一个正则表达式，它可以使得 go test 只运行那些测试函数名称匹配给定模式的函数

## Test 函数
每一个测试文件必须导入 testing 包。这些函数的函数签名如下：

```go
func TestName(t *testing.T) {
    // ...
}
```

参数 t 提供了汇报测试失败和日志记录的功能，调用 `t.Error` 或 `t.Errorf` 输出的失败测试用例没有包含整个跟踪栈信息，也不会导致程序宕机或者终止执行。如果我们真的需要终止一个测试函数，可以使用 `t.Fatal` 或 `t.Fatalf` 函数来终止测试。这些函数的调用必须和 Test 函数在同一个 goroutine 中，而不是在测试创建的其他 goroutine 中。